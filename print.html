<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title></title>
        <meta name="robots" content="noindex" />


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="introduction.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="hello-world.html"><strong aria-hidden="true">2.</strong> Hello World</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="hello-world/deno.html"><strong aria-hidden="true">2.1.</strong> Deno</a></li><li class="chapter-item expanded "><a href="hello-world/node-js.html"><strong aria-hidden="true">2.2.</strong> Node.js</a></li><li class="chapter-item expanded "><a href="hello-world/react-vite.html"><strong aria-hidden="true">2.3.</strong> React + Vite</a></li><li class="chapter-item expanded "><a href="hello-world/vanilla-javascript.html"><strong aria-hidden="true">2.4.</strong> Vanilla JavaScript</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="welcome-to-mtkruto"><a class="header" href="#welcome-to-mtkruto">Welcome to MTKruto</a></h1>
<p>MTKruto is a library that lets you interact with the
<a href="https://core.telegram.org/#telegram-api">Telegram API</a>. It can be used from
JavaScript or TypeScript, and can run on Deno, browsers, and Node.js.</p>
<h2 id="the-telegram-api-vs-the-bot-api"><a class="header" href="#the-telegram-api-vs-the-bot-api">The Telegram API vs. the Bot API</a></h2>
<p><a href="https://core.telegram.org/bots/api">Bot API</a> is a high-level HTTP interface to
the Telegram API that makes it easy to develop bots and lets you focus on being
more productive. We highly recommend it if you’re planning to develop complex
bots.</p>
<p>On the other hand, the Telegram API is the main API for building Telegram
clients. It uses the <a href="https://core.telegram.org/mtproto">MTProto</a> protocol which
makes it a little more difficult to consume without a library than the Bot API.
Telegram clients can be a GUI application on an end user’s device, or a process
running continuously in a server.</p>
<p>While the Bot API can only be used to work with bot accounts, the Telegram API
can be used to work with both bot and user accounts. As mentioned previously,
the Bot API is simply an interface to work with bot accounts using the Telegram
API.</p>
<h2 id="when-to-use-the-telegram-api"><a class="header" href="#when-to-use-the-telegram-api">When to Use the Telegram API</a></h2>
<ul>
<li>If you want to use bot capabilities that are currently not accessible from the
Bot API (including, but not limited to, getting updates when messages are
deleted).</li>
<li>If you want to bypass the limits of the main instance of the Bot API without
hosting your own instance (including, but not limited to, work with large
files).</li>
<li>If you want to develop your own Telegram app (e.g., alternative to
<a href="https://web.telegram.org/a">Telegram Web</a>).</li>
<li>If you want to automate user accounts.</li>
<li>If you have your own reasons.</li>
</ul>
<h2 id="things-to-consider"><a class="header" href="#things-to-consider">Things to Consider</a></h2>
<ul>
<li>The Telegram API requires its clients to maintain a database even if it is
used for a bot account, but the Bot API does not.</li>
<li>You can’t interact with the Telegram API using webhooks. You have to maintain
a connection with Telegram servers.</li>
<li>You can’t use both the Bot API and the Telegram API at once for the same bot.</li>
</ul>
<h2 id="mtkruto-vs-tdlib"><a class="header" href="#mtkruto-vs-tdlib">MTKruto vs. TDLib</a></h2>
<p><a href="https://core.telegram.org/tdlib">TDLib</a> is the official client library for the
Telegram API. It is ideal, cross-platform, and contains everything required to
build fully-featured Telegram clients, be it native graphical apps, web apps, or
bots. Inside JavaScript runtimes, TDLib can be used either as a Wasm module, or
imported as a dynamic library to use its FFI.</p>
<p>TDLib focuses on getting the most out of the platform it runs on, while MTKruto
focuses on getting the most out of the JavaScript runtime it runs on. MTKruto
tends to be less weighted than TDLib and use the features of the JavaScript
runtime it runs on wherever possible, possibly making it more suitable for
JavaScript runtimes.</p>
<p>It’s also worth mentioning that TDLib hasn’t been used in any of Telegram’s
official web clients, and JavaScript client implementations were used instead.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="hello-world"><a class="header" href="#hello-world">Hello World</a></h1>
<p>Here you will learn how you can add MTKruto to your project and invoke a ping
request. Choose your preferred environment to get started.</p>
<ul>
<li><a href="./hello-world/deno.html">Deno</a></li>
<li><a href="./hello-world/node-js.html">Node.js</a></li>
<li><a href="./hello-world/react-vite.html">React + Vite</a></li>
<li><a href="./hello-world/vanilla-javascript.html">Vanilla JavaScript</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="deno"><a class="header" href="#deno">Deno</a></h1>
<p>MTKruto is available for Deno at <a href="https://deno.land/x/mtkruto">https://deno.land/x/mtkruto</a>. Here’s how you
can initialize a client, connect it, and invoke a ping request.</p>
<h2 id="prerequisites"><a class="header" href="#prerequisites">Prerequisites</a></h2>
<ul>
<li><a href="https://deno.land">Deno</a></li>
</ul>
<h2 id="setup"><a class="header" href="#setup">Setup</a></h2>
<p>For this guide, we will have only a single file and we won’t persist any data
since we won’t reuse the connection. For most projects, we recommend having a
directory with a Deno configuration file.</p>
<p>Create a file called <code>ping.ts</code> and import the <code>Client</code> class from MTKruto:</p>
<pre><code class="language-ts">import { Client } from &quot;https://deno.land/x/mtkruto/mod.ts&quot;;
</code></pre>
<blockquote>
<p>Remember to replace the import specifier to explicitly specify a specific
version of MTKruto. We have omitted it here to stay simple.</p>
</blockquote>
<h2 id="starting-the-client"><a class="header" href="#starting-the-client">Starting the Client</a></h2>
<p>Before we can invoke functions, we first initialize and start a client.</p>
<p>Starting the client for the first time will take a little amount of time
regardless of the connection speed. It might even take more if you are
connecting to a test server. In this guide, our client will always take a little
to start since we don’t have a persistency layer for the sake of staying simple.</p>
<pre><code class="language-ts">const client = new Client();

console.log(&quot;Starting client...&quot;);
await client.connect();
console.log(&quot;Client started.&quot;);
</code></pre>
<p>The above code initializes a client with the default parameters and no API
credentials. After that, it initiates a connection with Telegram’s test servers.</p>
<h2 id="invoking-functions"><a class="header" href="#invoking-functions">Invoking Functions</a></h2>
<p>You can make calls directly to the Telegram API using the <code>invoke()</code> method of
the client. The argument you pass to it should be an instance of a call
definition from the <code>functions</code> namespace.</p>
<p>Update your import declaration to look like this:</p>
<pre><code class="language-ts">import { Client, functions } from &quot;https://deno.land/x/mtkruto/mod.ts&quot;;
</code></pre>
<p>And invoke a <code>ping</code> call:</p>
<pre><code class="language-ts">const before = Date.now();
await client.invoke(new functions.Ping({ pingId: 1n }));
const diff = Math.floor(Date.now() - before);
console.log(&quot;Ping took&quot;, `${diff}ms.`);
</code></pre>
<h2 id="conclusion"><a class="header" href="#conclusion">Conclusion</a></h2>
<p>Your final code should look like this:</p>
<p>File name: ping.ts</p>
<pre><code class="language-ts">import { Client, functions } from &quot;https://deno.land/x/mtkruto/mod.ts&quot;;

const client = new Client();

console.log(&quot;Starting client...&quot;);
await client.connect();
console.log(&quot;Client started.&quot;);

const before = Date.now();
await client.invoke(new functions.Ping({ pingId: 1n }));
const diff = Math.floor(Date.now() - before);
console.log(&quot;Ping took&quot;, `${diff}ms.`);
</code></pre>
<p>Use the following command to run it:</p>
<pre><code class="language-bash">deno run --allow-net ping.ts
</code></pre>
<p>You should get a result like this:</p>
<pre><code class="language-ts">Starting client...
Client started.
Ping took 215ms.
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="nodejs"><a class="header" href="#nodejs">Node.js</a></h1>
<p>MTKruto is available for Node.js on npm as
<a href="https://npm.im/@mtkruto/node"><code>@mtkruto/node</code></a>. Here you will learn how you can
use MTKruto in your Node.js project.</p>
<h2 id="prequisites"><a class="header" href="#prequisites">Prequisites</a></h2>
<ul>
<li><a href="https://nodejs.org">Node.js</a></li>
</ul>
<h2 id="setup-1"><a class="header" href="#setup-1">Setup</a></h2>
<p>First, create a directory for our project, initialize package.json, and install
MTKruto:</p>
<pre><code class="language-ts">mkdir ping
cd ping
npm init -y
npm install @mtkruto/node
</code></pre>
<blockquote>
<p>We’re using npm here, but you can also use pnpm, yarn, or anything else you
prefer.</p>
</blockquote>
<p>Create a file called <code>ping.js</code> and import the <code>Client</code> class from MTKruto:</p>
<pre><code class="language-ts">const { Client } = require(&quot;@mtkruto/node&quot;);
</code></pre>
<blockquote>
<p>We’re using the CJS syntax here, but ESM is also supported by <code>@mtkruto/node</code>.</p>
</blockquote>
<h2 id="starting-the-client-1"><a class="header" href="#starting-the-client-1">Starting the Client</a></h2>
<p>Before we can invoke functions, we first initialize and start a client.</p>
<p>Starting the client for the first time will take a little amount of time
regardless of the connection speed. It might even take more if you are
connecting to a test server. In this guide, our client will always take a little
to start since we don’t have a persistency layer for the sake of staying simple.</p>
<pre><code class="language-ts">const client = new Client();

console.log(&quot;Starting client...&quot;);
await client.connect();
console.log(&quot;Client started.&quot;);
</code></pre>
<p>The above code initializes a client with the default parameters and no API
credentials. After that, it initiates a connection with Telegram’s test servers.</p>
<h2 id="invoking-functions-1"><a class="header" href="#invoking-functions-1">Invoking Functions</a></h2>
<p>You can make calls directly to the Telegram API using the <code>invoke()</code> method of
the client. The argument you pass to it should be an instance of a call
definition from the <code>functions</code> namespace.</p>
<p>Update your import declaration to look like this:</p>
<pre><code class="language-ts">const { Client, functions } = require(&quot;@mtkruto/node&quot;);
</code></pre>
<p>And invoke a <code>ping</code> call:</p>
<pre><code class="language-ts">const before = Date.now();
await client.invoke(new functions.Ping({ pingId: 1n }));
const diff = Math.floor(Date.now() - before);
console.log(&quot;Ping took&quot;, `${diff}ms.`);
</code></pre>
<h2 id="conclusion-1"><a class="header" href="#conclusion-1">Conclusion</a></h2>
<p>Your final code should look like this:</p>
<p>File name: ping.js</p>
<pre><code class="language-ts">const { Client, functions } = require(&quot;@mtkruto/node&quot;);

const client = new Client();

console.log(&quot;Starting client...&quot;);
await client.connect();
console.log(&quot;Client started.&quot;);

const before = Date.now();
await client.invoke(new functions.Ping({ pingId: 1n }));
const diff = Math.floor(Date.now() - before);
console.log(&quot;Ping took&quot;, `${diff}ms.`);
</code></pre>
<p>Use the following command to run it:</p>
<pre><code class="language-bash">node ping.js
</code></pre>
<p>You should get a result like this:</p>
<pre><code class="language-ts">Starting client...
Client started.
Ping took 215ms.
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="react--vite"><a class="header" href="#react--vite">React + Vite</a></h1>
<p>[Not Ready Yet]</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="vanilla-javascript"><a class="header" href="#vanilla-javascript">Vanilla JavaScript</a></h1>
<p>It is less likely that you will use MTKruto this way. This guide is mainly to
demonstrate how simple it is to get started with MTKruto.</p>
<h2 id="prequisites-1"><a class="header" href="#prequisites-1">Prequisites</a></h2>
<ul>
<li>A modern web browser</li>
<li>A text editor</li>
</ul>
<h2 id="setup-2"><a class="header" href="#setup-2">Setup</a></h2>
<p>Create a file called <code>ping.html</code> with the following contents:</p>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;script type=&quot;module&quot; defer&gt;
            import { Client } from &quot;https://esm.sh/@mtkruto/browser&quot;;
        &lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;
    &lt;/body&gt;    
&lt;/html&gt;
</code></pre>
<h2 id="starting-the-client-2"><a class="header" href="#starting-the-client-2">Starting the Client</a></h2>
<p>Before we can invoke functions, we first initialize and start a client.</p>
<p>Starting the client for the first time will take a little amount of time
regardless of the connection speed. It might even take more if you are
connecting to a test server. In this guide, our client will always take a little
to start since we don’t have a persistency layer for the sake of staying simple.</p>
<p>Extend the contents of the <code>&lt;script&gt;</code> tag with this snippet:</p>
<pre><code class="language-ts">const client = new Client();

console.log(&quot;Starting client...&quot;);
await client.connect();
console.log(&quot;Client started.&quot;);
</code></pre>
<p>The above code initializes a client with the default parameters and no API
credentials. After that, it initiates a connection with Telegram’s test servers.</p>
<h2 id="invoking-functions-2"><a class="header" href="#invoking-functions-2">Invoking Functions</a></h2>
<p>You can make calls directly to the Telegram API using the <code>invoke()</code> method of
the client. The argument you pass to it should be an instance of a call
definition from the <code>functions</code> namespace.</p>
<p>Update your import declaration to look like this:</p>
<pre><code class="language-ts">import { Client, functions } from &quot;https://esm.sh/@mtkruto/browser&quot;;
</code></pre>
<p>And invoke a <code>ping</code> call:</p>
<pre><code class="language-ts">const before = Date.now();
await client.invoke(new functions.Ping({ pingId: 1n }));
const diff = Math.floor(Date.now() - before);
console.log(&quot;Ping took&quot;, `${diff}ms.`);
</code></pre>
<h2 id="conclusion-2"><a class="header" href="#conclusion-2">Conclusion</a></h2>
<p>Your final code should look like this:</p>
<p>File name: ping.html</p>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;script type=&quot;module&quot; defer&gt;
            import { Client, functions } from &quot;https://esm.sh/@mtkruto/browser&quot;;

            const client = new Client();

            console.log(&quot;Starting client...&quot;);
            await client.connect();
            console.log(&quot;Client started.&quot;);

            const before = Date.now();
            await client.invoke(new functions.Ping({ pingId: 1n }));
            const diff = Math.floor(Date.now() - before);
            console.log(&quot;Ping took&quot;, `${diff}ms.`);
        &lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;
    &lt;/body&gt;    
&lt;/html&gt;
</code></pre>
<p>To run it, simply open that file with your browser. After opening the file, open
the developer tools, and navigate to the tab called Console.</p>
<p>You should see something like this:</p>
<pre><code class="language-ts">Starting client...
Client started.
Ping took 215ms.
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
